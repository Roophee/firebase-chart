(this.webpackJsonpchat_firebase=this.webpackJsonpchat_firebase||[]).push([[0],{14:function(e,t,n){"use strict";var a=n(2),r=n(4),i=n(26),s=function(){function e(){Object(a.a)(this,e),this.auth=void 0,this.loginOrRegistration=!1,this.db=void 0,this.usersInfo={name:"",photoUrl:"",id:"",lastActivity:null},this.user=null,this.currentOpponent=null,this.dialogPath="",this.unsubscribeDialog=null,this.dialog=[],this.loading=!1,this.storage=null,Object(i.d)(this,{},{autoBind:!0})}return Object(r.a)(e,[{key:"userLogOut",value:function(){this.currentOpponent=null,this.dialog=[],this.dialogPath="",this.usersInfo={name:"",photoUrl:"",id:"",lastActivity:null},this.loginOrRegistration=!1}},{key:"setCurrentOpponent",value:function(e){this.currentOpponent=e}},{key:"getCurrentOpponent",get:function(){return this.currentOpponent}},{key:"setStorage",value:function(e){this.storage=e}},{key:"getMyStorage",get:function(){return this.storage}},{key:"setLoading",value:function(e){this.loading=e}},{key:"getLoading",get:function(){return this.loading}},{key:"setDialog",value:function(e){this.dialog=e}},{key:"getDialog",get:function(){return this.dialog}},{key:"setUnsubscribeDialog",value:function(e){this.unsubscribeDialog=e}},{key:"getUnsubscribeDialog",get:function(){return this.unsubscribeDialog}},{key:"setUsersInfo",value:function(e){this.usersInfo=e}},{key:"getUsersInfo",get:function(){return this.usersInfo}},{key:"setDialogPath",value:function(e){this.dialogPath=function(e){return"dialogs/".concat(e,"/messages")}(e)}},{key:"getDialogPath",get:function(){return this.dialogPath}},{key:"setLoginOrRegistration",value:function(){this.loginOrRegistration=!this.loginOrRegistration}},{key:"setDB",value:function(e){this.db=e}},{key:"getDB",get:function(){return this.db}},{key:"setCurrentUser",value:function(e){this.user=e}},{key:"getCurrentUser",value:function(){return this.user}},{key:"getCurrentAuth",value:function(){return this.auth}},{key:"setCurrentAuth",value:function(e){this.auth=e}}]),e}();t.a=new s},264:function(e,t,n){},265:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(51),s=n.n(i),o=n(144),c=n(288),l=n(289),u=n(130),d=n(61),h=n(23),j=n(14),b=n(13),m=n(36),p=n(291),g=n(292),O=n(80),f=n(54),x=n(0),v=n.n(x),y=n(3),w=function(){var e=Object(y.a)(v.a.mark((function e(){var t,n,a,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=j.a.getCurrentUser(),n=j.a.getDB,!t||!n){e.next=11;break}return a=Object(h.b)(n,"users"),r=Object(h.g)(a,Object(h.i)("id","==",t.uid)),e.next=7,Object(h.d)(r);case 7:if(!(i=e.sent).empty){e.next=10;break}return e.abrupt("return",{name:"",photoUrl:"",id:"",lastActivity:null});case 10:return e.abrupt("return",i.docs[0].data());case 11:return e.abrupt("return",{name:"Harry Potter",photoUrl:"-1",id:"-1",lastActivity:-1});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=n(6),F=Object(p.a)({box_root:{width:"100%",height:"100%"},containerXYZ:{width:"90%",margin:"auto",height:"100%"}}),N=Object(m.a)((function(e){var t=e.children,n=F(),r=Object(O.a)(j.a.getCurrentAuth()),i=Object(b.a)(r,2),s=i[0],o=i[1];return Object(a.useEffect)((function(){var e;j.a.setCurrentUser(s),j.a.setStorage(Object(f.b)(null===(e=j.a.getCurrentAuth())||void 0===e?void 0:e.app)),w().then((function(e){return j.a.setUsersInfo(e)}))}),[null===s||void 0===s?void 0:s.uid,s]),j.a.setLoading(o),Object(k.jsx)(g.a,{className:n.box_root,children:Object(k.jsx)(g.a,{className:n.containerXYZ,children:t})})})),I=n(101),C=n(22),S="/firebase-chart/login",A="/firebase-chart/chat",B="/firebase-chart/registration",U=n(287),D=n(39),E=n(40),R=n(293),T=n(290),L=function(){var e=Object(y.a)(v.a.mark((function e(){var t,n,a,r,i,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=j.a.getCurrentUser(),n=j.a.getDB,!t||!n){e.next=13;break}return a=Object(h.b)(n,"users"),r=Object(h.g)(a,Object(h.i)("id","==",t.uid)),e.next=7,Object(h.d)(r);case 7:return i=e.sent,e.next=10,Object(h.c)(a,i.docs[0].id);case 10:return s=e.sent,e.next=13,Object(h.h)(s,{lastActivity:Date.now()});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=Object(p.a)({TicketForm:{margin:"auto",width:"90%",fontSize:"1.5rem"},InputItem:{marginBottom:"30px"},InputElement:{width:"100%",fontFamily:"default","& input":{marginBottom:"10px",padding:"10px",borderRadius:"5px"}},FormSubmit:{width:"100%",marginBottom:"10px",fontFamily:"default",padding:"5px",textTransform:"none",backgroundColor:"#09af3b",color:"#FAFAFA",fontWeight:600,"&:hover":{backgroundColor:"#089C35FF"}}}),q=Object(m.a)((function(){var e=P(),t=Object(a.useState)(!1),n=Object(b.a)(t,2),r=n[0],i=n[1];return Object(k.jsx)(D.c,{initialValues:{email:"",password:""},validationSchema:E.a({email:E.c().email("Invalid email address").required("Required"),password:E.c().min(5).max(15,"Must be 15 characters or less").required("Required")}),onSubmit:function(e,t){var n=t.setSubmitting,a=j.a.getCurrentAuth();a&&Object(d.c)(a,e.email,e.password).then((function(){L()})).catch((function(e){i(e.message),setTimeout((function(){return i(!1)}),1e4)})),setTimeout((function(){n(!1)}),400)},children:function(t){return Object(k.jsxs)(D.b,{className:e.TicketForm,children:[r?Object(k.jsx)(T.a,{severity:"warning",children:r}):null,Object(k.jsxs)(g.a,{className:e.InputElement,children:[Object(k.jsx)(D.a,{placeholder:"Work Email",name:"email",type:"email",className:e.InputElement}),t.errors.email&&t.touched.email?Object(k.jsx)(T.a,{severity:"warning",children:t.errors.email}):null]}),Object(k.jsxs)(g.a,{className:e.InputElement,children:[Object(k.jsx)(D.a,{placeholder:"Password",name:"password",type:"password",className:e.InputElement}),t.errors.password&&t.touched.password?Object(k.jsx)(T.a,{severity:"warning",children:t.errors.password}):null]}),Object(k.jsx)(R.a,{type:"submit",className:e.FormSubmit,children:"Sing In"})]})}})})),z=n(67),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{nameFromForm:"",photoURLFromForm:"",lastActivity:null},t=e.nameFromForm,n=e.photoURLFromForm,a=j.a.getCurrentUser(),r=j.a.getDB;if(a&&r){var i={name:t||a.displayName,photoUrl:n||a.photoURL,id:a.uid,lastActivity:Date.now()},s=Object(h.b)(r,"users"),o=Object(h.g)(s,Object(h.i)("id","==",null===a||void 0===a?void 0:a.uid));Object(h.d)(o).then((function(e){e.empty&&Object(h.a)(Object(h.b)(r,"users"),i),j.a.setUsersInfo(i)}))}},W=Object(p.a)({root:{width:"90%",margin:"auto"},singInButton:{position:"relative",width:"100%",marginBottom:"30px",fontFamily:"default",padding:"5px",textTransform:"none",color:"#757575","&:before":{position:"absolute",zIndex:-1,top:"7px",left:"7px",width:"20px",height:"20px",content:'url("https://api.iconify.design/logos/google-icon.svg?width=20&height=20")'}}}),G=Object(m.a)((function(e){var t=e.login,n=j.a.getCurrentAuth(),a=W();return Object(k.jsx)(g.a,{className:a.root,children:Object(k.jsxs)(R.a,{onClick:function(){if(n){var e=new z.a;Object(z.e)(n,e).then((function(){return M()})).then((function(){return L()}))}},variant:"outlined",className:a.singInButton,children:["Sign",t?" In ":" Up "," with Google"]})})})),H=Object(p.a)({separatorContainer:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"30px"},separatorline:{height:"1px",flexGrow:1,borderTop:"1px solid #9E9E9E"},separatorText:{padding:"0 5px",color:"#757575",fontWeight:600}}),Y=function(){var e=H();return Object(k.jsxs)("div",{className:e.separatorContainer,children:[Object(k.jsx)("div",{className:e.separatorline}),Object(k.jsx)("div",{className:e.separatorText,children:Object(k.jsx)("span",{children:"or"})}),Object(k.jsx)("div",{className:e.separatorline})]})},_=Object(p.a)({link:{marginBottom:"30px",fontFamily:"default",fontSize:".7rem",marginRight:"5%",float:"right"},header:{marginBottom:"30px",textAlign:"center",fontFamily:"default","& span":{letterSpacing:"normal"},"& h4":{margin:"10px 0",fontWeight:600}}}),V=function(){var e=_();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{className:e.header,children:[Object(k.jsx)(U.a,{variant:"h4",children:"Harvest ID"}),Object(k.jsxs)("span",{children:["Sing in to a ",Object(k.jsx)("strong",{children:"Harvest"})," or"," ",Object(k.jsx)("strong",{children:"Forecast"})," account"]})]}),Object(k.jsx)(G,{login:!0}),Object(k.jsx)(Y,{}),Object(k.jsx)(q,{}),Object(k.jsx)("a",{className:e.link,href:"https://zapier.com/blog/better-memory/",children:"Fogot your password?"})]})},Z=Object(p.a)({centeredBox:{width:"450px",position:"absolute",top:"50%",left:"50%",backgroundColor:"#fff",borderRadius:"5px",padding:"10px 0",transform:"translate(-50%, -50%)"}}),J=function(e){var t=e.children,n=Z();return Object(k.jsx)(g.a,{className:n.centeredBox,children:t})},K=Object(p.a)({TicketForm:{margin:"auto",width:"90%",fontSize:"1.5rem"},InputItem:{marginBottom:"30px"},InputElement:{width:"100%",fontFamily:"default","& input":{marginBottom:"10px",padding:"10px",borderRadius:"5px"}},FormSubmit:{width:"100%",marginBottom:"10px",fontFamily:"default",padding:"5px",textTransform:"none",backgroundColor:"#09af3b",color:"#FAFAFA",fontWeight:600,"&:hover":{backgroundColor:"#089C35FF"}}}),X=Object(m.a)((function(){var e=K(),t=Object(a.useState)(null),n=Object(b.a)(t,2),r=n[0],i=n[1],s=Object(a.useState)(!1),o=Object(b.a)(s,2),c=o[0],l=o[1];return Object(k.jsx)(D.c,{initialValues:{name:"",email:"",password:"",passwordAgain:"",file:typeof File},validationSchema:E.a({name:E.c().min(2).max(20),email:E.c().email("Invalid email address").required("Required"),password:E.c().min(5).max(15,"Must be 15 characters or less").required("Required"),passwordAgain:E.c().when("password",{is:function(e){return e&&e.length>0},then:E.c().oneOf([E.b("password")],"Both password need to be the same")})}),onSubmit:function(e,t){var n=t.setSubmitting,a=j.a.getCurrentAuth();a&&Object(d.a)(a,e.email,e.password).then((function(){if(r)return function(e){var t=j.a.getMyStorage;if(t){var n=Object(f.c)(t,"users_photo/".concat(e.name));return Object(f.d)(n,e)}}(r)})).then((function(e){var t=null===e||void 0===e?void 0:e.ref,n=j.a.getMyStorage;if(n){var a=Object(f.c)(n,null===t||void 0===t?void 0:t.fullPath);return Object(f.a)(a)}return""})).then((function(t){M({nameFromForm:e.name,photoURLFromForm:t||"",lastActivity:Date.now()})})).catch((function(e){l(e.message),setTimeout((function(){return l(!1)}),1e4)})),setTimeout((function(){n(!1)}),400)},children:function(t){return Object(k.jsxs)(D.b,{className:e.TicketForm,children:[c?Object(k.jsx)(T.a,{severity:"warning",children:c}):null,Object(k.jsxs)(g.a,{className:e.InputElement,children:[Object(k.jsx)(D.a,{placeholder:"Name",name:"name",type:"text",className:e.InputElement}),t.errors.name&&t.touched.name?Object(k.jsx)(T.a,{severity:"warning",children:t.errors.name}):null]}),Object(k.jsx)(g.a,{children:Object(k.jsx)("input",{type:"file",name:"file",onChange:function(e){var t;if(null===(t=e.target.files)||void 0===t?void 0:t.length){var n=e.target.files[0];i(n)}}})}),Object(k.jsxs)(g.a,{className:e.InputElement,children:[Object(k.jsx)(D.a,{placeholder:"Work Email",name:"email",type:"email",className:e.InputElement}),t.errors.email&&t.touched.email?Object(k.jsx)(T.a,{severity:"warning",children:t.errors.email}):null]}),Object(k.jsxs)(g.a,{className:e.InputElement,children:[Object(k.jsx)(D.a,{placeholder:"Password",name:"password",type:"password",className:e.InputElement}),t.errors.password&&t.touched.password?Object(k.jsx)(T.a,{severity:"warning",children:t.errors.password}):null]}),Object(k.jsxs)(g.a,{className:e.InputElement,children:[Object(k.jsx)(D.a,{placeholder:"Confirm Password",name:"passwordAgain",type:"password",className:e.InputElement}),t.errors.passwordAgain&&t.touched.passwordAgain?Object(k.jsx)(T.a,{severity:"warning",children:t.errors.passwordAgain}):null]}),Object(k.jsx)(R.a,{type:"submit",className:e.FormSubmit,children:"Sing Up"})]})}})})),Q=Object(p.a)({link:{marginBottom:"30px",fontFamily:"default",fontSize:".7rem",marginRight:"5%",float:"right"},header:{marginBottom:"30px",textAlign:"center",fontFamily:"default","& span":{letterSpacing:"normal"},"& h4":{margin:"10px 0",fontWeight:600}}}),$=function(){var e=Q();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{className:e.header,children:[Object(k.jsx)(U.a,{variant:"h4",children:"Harvest ID"}),Object(k.jsxs)("span",{children:["Sing Up to a ",Object(k.jsx)("strong",{children:"Harvest"})," or"," ",Object(k.jsx)("strong",{children:"Forecast"})," account"]})]}),Object(k.jsx)(G,{login:!1}),Object(k.jsx)(Y,{}),Object(k.jsx)(X,{})]})},ee=function(){return Object(k.jsx)(J,{children:j.a.loginOrRegistration?Object(k.jsx)($,{}):Object(k.jsx)(V,{})})},te=[{path:S,Component:ee},{path:B,Component:ee}],ne=[{path:A,Component:Object(a.lazy)((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,316))}))}],ae=Object(p.a)({header:{width:"100%",display:"flex",justifyContent:"space-between"},myButton:{margin:"10px 0",backgroundColor:"#09B83E","&:hover":{backgroundColor:"#099336"}}}),re=Object(m.a)((function(){var e=j.a.loginOrRegistration,t=j.a.auth,n=ae(),a=Object(O.a)(t),r=Object(b.a)(a,1)[0],i=j.a.getUsersInfo.name,s=Object(C.g)();return Object(k.jsxs)("header",{className:n.header,children:[!r&&Object(k.jsx)(R.a,{className:n.myButton,onClick:function(){j.a.setLoginOrRegistration(),s.push(e?S:B)},children:e?"Sing In":"Sing Up"}),r&&Object(k.jsx)(R.a,{className:n.myButton,onClick:function(){t&&t.signOut().then((function(){return j.a.userLogOut()}))},children:"Sing Out"}),j.a.getCurrentUser()&&Object(k.jsx)(R.a,{children:i})]})})),ie=(n(264),function(){return Object(k.jsxs)("div",{id:"cupcake",className:"box",children:[Object(k.jsx)("span",{className:"letter",children:"L"}),Object(k.jsx)("div",{className:"cupcakeCircle box",children:Object(k.jsx)("div",{className:"cupcakeInner box",children:Object(k.jsx)("div",{className:"cupcakeCore box"})})}),Object(k.jsx)("span",{className:"letter box",children:"A"}),Object(k.jsx)("span",{className:"letter box",children:"D"}),Object(k.jsx)("span",{className:"letter box",children:"I"}),Object(k.jsx)("span",{className:"letter box",children:"N"}),Object(k.jsx)("span",{className:"letter box",children:"G"})]})}),se=Object(m.a)((function(){return j.a.getLoading?Object(k.jsx)(ie,{}):Object(k.jsxs)(I.a,{children:[Object(k.jsx)(re,{}),j.a.user?Object(k.jsxs)(C.d,{children:[ne.map((function(e){var t=e.path,n=e.Component;return Object(k.jsx)(C.b,{path:t,component:n,exact:!0},t)})),Object(k.jsx)(C.a,{to:A})]}):Object(k.jsxs)(C.d,{children:[te.map((function(e){var t=e.path,n=e.Component;return Object(k.jsx)(C.b,{path:t,component:n,exact:!0},t)})),Object(k.jsx)(C.a,{to:S})]})]})})),oe=function(){return Object(k.jsx)(N,{children:Object(k.jsx)(a.Suspense,{fallback:Object(k.jsx)(ie,{}),children:Object(k.jsx)(se,{})})})},ce=Object(o.a)({overrides:{MuiCssBaseline:{"@global":{html:{width:"100%",height:"100%"},body:{margin:0,padding:0,width:"100%",height:"100%",backgroundColor:"#455A64"},"#root":{height:"100%"}}}}});Object(u.a)({apiKey:"AIzaSyBeqN4ZnVlK7OsgDj1RFgSGNSTYGF5YTUY",authDomain:"chat-demo-e9b1a.firebaseapp.com",projectId:"chat-demo-e9b1a",storageBucket:"chat-demo-e9b1a.appspot.com",messagingSenderId:"370779111668",appId:"1:370779111668:web:e9b4ccc1c5597fbcf15ea1"}),j.a.setCurrentAuth(Object(d.b)()),j.a.setDB(Object(h.e)()),s.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsxs)(c.a,{theme:ce,children:[Object(k.jsx)(l.a,{}),Object(k.jsx)(oe,{})]})}),document.getElementById("root"))}},[[265,1,2]]]);
//# sourceMappingURL=main.9cb28f81.chunk.js.map